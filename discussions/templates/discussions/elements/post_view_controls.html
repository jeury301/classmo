<!-- This element expects a Post object named post in context -->

<div class="discuss-regmargin">
    <div>
        <h4>{{post.title}}</h4>
    </div>

    {% if user.is_authenticated %}
    <!-- Only registered users can upvote/downvote -->
    <div class="comment-leftbox">
        <div class="comment-votecontrol" id="post-upvote-{{post.id}}" 
             onclick="cast_vote({{post.id}}, 1, 'post')">
            &#x25B4;<i class="fa fa-arrow-circle-o-up"></i>
        </div>
        <div class="comment-votecontrol" id="post-novote-{{post.id}}" 
             onclick="cast_vote({{post.id}}, 0, 'post')">
            &#x2715;
        </div>
        <div class="comment-votecontrol" id="post-downvote-{{post.id}}" 
             onclick="cast_vote({{post.id}}, -1, 'post')">
            &#x25BE;<i class="fa fa-arrow-circle-o-down"></i>
        </div>
    </div>
    {% endif %}

    <div class="comment-rightbox">
        <div class="comment-metabox">
            <span>
                <strong>
                {% if post.author %}
                    {{post.author}}
                {% else %}
                    Anonymous
                {% endif %}
                </strong>
                at {{post.created_date}} (Score: <span id="post-score-{{post.id}}">{{post.score}}</span>)
            </span>
        </div>
        <div>
            {{post.body}}
        </div>
        {% if user.is_authenticated %}
        <div>
            <a href="#">Report</a>
            |
            <a href="{% url 'discussions:new_top' post.id %}">Reply</a>
        </div>
        {% else %}
        <div>
            <a href="{% url 'login' %}">Log in to reply</a>
        </div>
        {% endif %}
    </div>
</div>

{% extends 'base.html' %}
{% load static %}



{% block content %}
    <link href="{% static 'css/comment_list.css' %}" rel="stylesheet" media="screen">

    <div>
        <h5><a href="{% url 'list_posts' post.subject.id %}">< Back to {{post.subject.name}}</a></h5>
    </div>

    {% include "discussions/elements/post_view_controls.html" %}

    {% if comments %}
        <ul class="no-bullets">
        {% for comment in comments %}
            {% if comment.rel_depth > 0 %} 
                {% for i in comment.depth_counter %}
                <ul class="no-bullets"> 
                {% endfor %}
            {% endif %}
            {% if comment.rel_depth < 0 %}
                {% for i in comment.depth_counter %}
                </ul> 
                {% endfor %}
            {% endif %}
            <li>
                <div>
                    <span>  
                        <strong>
                        {% if comment.comment.author %} 
                            {{comment.comment.author}} 
                        {% else %}
                            Anonymous 
                        {% endif %}
                        </strong>
                        at {{comment.comment.created_date}}
                    </span>
                </div>
                <div>
                    {{comment.comment.body}}
                </div>
                <div>
                    <a href="#">Report</a> | <a href="{% url 'new_child' comment.comment.id %}">Reply</a>
                </div>
            </li>
            
        {% endfor %}
        </ul>
    {% else %}
        Looks like there's no comments yet.  
        <a href="{% url 'new_top' post.id %}">Why not post the first?</a>
    {% endif %}

{% endblock %}